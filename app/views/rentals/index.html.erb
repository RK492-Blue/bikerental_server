<%if @current_user.nil?%>
<p></p><p></p>
<h2>Please Sign in.</h2>

<% elsif @current_user.present?%>
<p id="notice"><%= notice %></p>

<%if @current_user.user_type === 'admin' %>
  <h1>Rentals</h1>
  <%else%>
  <h1>Your Rental History</h1>
  <%end%>

<table>
  <thead>
    <%if @current_user.user_type === 'admin' %>
    <tr>
      <th>Bike</th>
      <th>User</th>
      <th>Start time</th>
      <th>End time</th>
      <th>Start station</th>
      <th>End station</th>
      <th>Cost</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>

    <% @rentals.each do |rental| %>
      <tr>
        <td><%= rental.bike.bike_serial_num %></td>
        <!-- <td><%= rental.user_id %></td> -->
        <td><%= rental.user.name%></td>


        <!-- <td><%= rental.start_time %></td> -->
        <!-- <td><%= rental.end_time %></td> -->

        <%if rental.start_time.present? %>
          <td> <%= rental.start_time.strftime('%e %b %Y  %l:%M %P') %>  </td>
          <%else%>
          <td></td>
        <%end%>

        <%if rental.end_time.present? %>
          <td> <%= rental.end_time.strftime('%e %b %Y  %l:%M %P') %>  </td>
          <%else%>
          <td></td>
        <%end%>

        <!--*******************************************-->
        <td><%= rental.start_stand.location %></td>

        <%if rental.end_stand_id.present?%>
        <td><%= rental.end_stand.location %></td>
        <%else %>
        <td></td>
        <% end %>

        <td><%= rental.cost %></td>
        <td><%= link_to 'Show', rental %></td>
        <td><%= link_to 'Return', edit_rental_path(rental) %></td>

          <%if rental.end_stand_id.present?%>
            <td><%= rental.end_stand.location %></td>
          <%else %>
            <td></td>
          <% end %>
        <!--*******************************************-->
        <td><%= number_to_currency(rental.cost) %></td>
        <td><%= link_to 'View Details', rental %></td>
        <td><%= link_to 'Return Bike', edit_rental_path(rental) %></td>

        <td><%= link_to 'Edit Rental', edit_rental_path(rental) %></td>
        <td><%= link_to 'Destroy', rental, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
      <% end %>
      <% elsif @current_user.user_type === 'user' %>


      <tr>
        <th>Bike</th>

        <th>Start time</th>
        <th>End time</th>
        <th>Start station</th>
        <th>End station</th>
        <!-- <th>Cost</th> -->
        <th colspan="3"></th>
      </tr>
    </thead>

    <tbody>

      <% @rental_user1.each do |rental| %>
        <tr>
          <td><%= rental.bike.bike_serial_num%></td>

          <!-- <td><%# rental.start_time %></td> -->
          <%if rental.start_time.present? %>
            <td> <%= rental.start_time.strftime('%e %b %Y  %l:%M %P') %></td>
            <%else%>
            <td></td>
          <%end%>
          <!-- <td><%#= rental.end_time %></td> -->



          <%if rental.end_time.present? %>
            <td> <%= rental.end_time.strftime('%e %b %Y  %l:%M %P') %>  </td>
            <%else%>
            <td></td>
          <%end%>
          <!--*******************************************-->

          <td><%= rental.start_stand.location %></td>
          <% if rental.end_stand_id.present? %>
          <td><%= rental.end_stand.location %></td>
          <%else %>
          <td></td>
          <% end %>
          <!--*******************************************-->

          <!-- <td><%= number_to_currency(rental.cost) %></td> -->




          <td><%= link_to 'View Details', rental %></td>
            <%if !rental.end_stand.present? %>
              <td><%= link_to 'Return Bike', edit_rental_path(rental) %></td>
            <% else %>
              <td></td>
            <%end %>
          <!-- <td><%= link_to 'Destroy', rental, method: :delete, data: { confirm: 'Are you sure?' } %></td> -->
        </tr>
        <% end %>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to 'New Rental', new_rental_path %>
<% end %>
